<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <script src="http://d3js.org/d3.v3.min.js"></script>
    <style>
	h2 {
	    text-align: center;
		font-family: Arial;
	  }
	</style>
    <script type="text/javascript"> 
		function bundesliga(data) {
			
			// Add title
			d3.select('body')
			  .append('h2')
			  .text("Bundesliga Standings between 1996 and 2016")
			
			var margin = 75,
                width = 1400 - margin,
				height = 800 - margin;
			
			
			// create SVG
			var svg = d3.select("body")
                        .append("svg")
                        .attr("width", width)
                        .attr("height", height);
			
			
			// Add Bundesliga Logo
	        var imgs = svg.selectAll("image")
	                      .data([0])		
				          .enter()
						  .append("svg:image")
						  .attr("xlink:href", "Bundesliga.png")
						  .attr("width", 100)	
						  .attr("x", width - 110)
						  .attr("y", height - 120)
			
			var table = d3.select('body')
			              .append('table');
			//debugger;
			
			//////////////////////////////////////////////////
			// Helper functions
			
			// Aggregate by standing
			function aggregateStanding(leaves) {
				var years = [];
				    teams = [];
					points = [];
				
				leaves.forEach(function(d) {
					years.push(d['year']);
					teams.push(d['teams']);
					points.push(d['points']);
				});
				
				return {
					'years' : years,
					'teams' : teams,
					'points': points
					
				};
			};
			
			// Extract row data
			function extractRowData(d) {
				var values = d[0].values.points.slice();
				debugger;
				return values
			};
			
			// Sort data by standing
			var nested = d3.nest()
						   .key(function(d) {
								return d['standing'];
						   })
						   .rollup(aggregateStanding)
						   .entries(data);
						   
			var rows = table.selectAll('tr');
			                //.data(data);
							
			var test = [1, 2, 3, 4, 5, 6, 7]
							
			var cells = rows.selectAll('td').data(test);
			
			cells.attr('class', 'update');

    // Cells enter selection
			cells.enter().append('td')
			     .style('opacity', 0.0)
				 .attr('class', 'enter')
				 .transition()
				 .delay(900)
				 .duration(500)
				 .style('opacity', 1.0);
			
			debugger;
		};
	</script>
  </head>
<body>
  <script type="text/javascript">

	// Load Bundesliga Statistics
	d3.csv("bundesliga_stats.csv", bundesliga)
  
  </script>
</body>
</html>